<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skylab Admin</title>
  <style>
    :root { --bg:#0b1220; --text:#e5e7eb; --card: rgba(255,255,255,0.06); --stroke: rgba(255,255,255,0.12); }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .wrap { max-width: 960px; margin: 24px auto; padding: 0 16px; }
    header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 16px; }
    select, button { background: var(--card); color: var(--text); border: 1px solid var(--stroke); border-radius: 10px; padding: 8px 12px; }
    textarea { width: 100%; min-height: 420px; background: var(--card); color: var(--text); border: 1px solid var(--stroke); border-radius: 12px; padding: 12px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 14px; }
    .row { display:flex; gap: 8px; align-items:center; }
    .status { opacity: 0.8; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h2>Translations</h2>
      <div class="row">
        <label for="lang">Language</label>
        <select id="lang">
          <option value="en">English</option>
          <option value="tr">Türkçe</option>
        </select>
        <button id="load">Load</button>
        <button id="save">Save</button>
      </div>
    </header>
    <label class="sr-only" for="editor">Translation JSON</label>
    <textarea id="editor" spellcheck="false" aria-label="Translation JSON" placeholder="{ }"></textarea>
    <p class="status" id="status"></p>
  </div>
  <script>
    const langEl = document.getElementById('lang');
    const editor = document.getElementById('editor');
    const statusEl = document.getElementById('status');
    document.getElementById('load').addEventListener('click', load);
    document.getElementById('save').addEventListener('click', save);
    async function load() {
      status('Loading...');
      const lang = langEl.value;
      const res = await fetch('/api/i18n/' + lang);
      if (!res.ok) return status('Failed to load: ' + res.status);
      const json = await res.json();
      editor.value = JSON.stringify(json, null, 2);
      status('Loaded ' + lang + '.json');
    }
    async function save() {
      const lang = langEl.value;
      let data;
      try { data = JSON.parse(editor.value); }
      catch (_e) { return status('Invalid JSON'); }
      status('Saving...');
      const res = await fetch('/api/i18n/' + lang, { method:'PUT', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify(data) });
      if (!res.ok) return status('Save failed: ' + res.status);
      status('Saved ' + lang + '.json');
    }
    function status(msg) { statusEl.textContent = msg; }
    load();
  </script>
</body>
</html>


